version: '3'
services:
  traefik:
    restart: unless-stopped
    image: traefik:v3.0
    ports:
      - '443:80'
    networks:
      - traefik
    volumes:
      - /run/user/1000/docker.sock:/var/run/docker.sock:ro
      - ./traefik.yml:/traefik.yml
      - ./traefik_api.yml:/traefik_api.yml

  chatmastr:
    image: ghcr.io/ryuumax/chatmastr:master
    networks:
      - traefik
      - default
    labels:
      - traefik.enable=true
      - traefik.http.routers.chatmastr.rule=Host(`a100.rc.th-b.com`)
    volumes:
      - /home/user/chatmastr/KnowledgeBase:/KnowledgeBase/
networks:
  traefik:
    external: true